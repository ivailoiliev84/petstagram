{% extends 'base.html' %} {% load static %} {% block content %}

<section id="posts-comment-section">
    <div class="main-post-comment-container">
        <div class="post-comment-image-container">
            <img src="{{ post.image.url }}" alt="" />
        </div>
        <div class="post-comment-title">
            <h1>{{ post.title }}</h1>
        </div>
        <div class="reatings-comment-container">
            <div class="post-comment-like">
                <div class="like">
                    <form method="post" action="{% url 'post_like' post.id %}">
                        {% csrf_token %}
                        <button type="submit" class="icon-btn" aria-label="Like">
                            <i class="fa-sharp fa-solid fa-thumbs-up"></i>
                        </button>
                    </form>
                </div>
                <div class="post-comment-like-count">
                    <span>{{ post.likes_count}}</span>
                </div>
            </div>

            <div class="post-comment-dislike">
                <div class="dislike">
                    <form method="post" action="{% url 'post_dislike' post.id %}">
                        {% csrf_token %}
                        <button type="submit" class="icon-btn" aria-label="Like">
                            <i class="fa-solid fa-thumbs-down"></i>
                        </button>
                    </form>
                </div>
                <div class="post-comment-dislike-count">
                    <span>{{ post.dislikes_count }}</span>
                </div>
            </div>

            <div class="post-comment">
                <div class="comment">
                    <a href="{% url 'post_details' post.id %}"
                        ><i class="fa-solid fa-pen-to-square"></i
                    ></a>
                </div>
                <div class="post-like-count">
                    <span>{{ post.comments_count}}</span>
                </div>
            </div>

            <div class="post-comment-rating">
                <div class="rating">
                    <i class="fa-solid fa-star"></i>
                    <i class="fa-solid fa-star"></i>
                    <i class="fa-solid fa-star"></i>
                    <i class="fa-solid fa-star"></i>
                    <i class="fa-regular fa-star"></i>
                </div>
            </div>
            <div class="post-comment-gallery-link">
                <a href="{% url 'gallery' %}"
                    ><i class="fa-solid fa-image"></i
                ></a>
            </div>
            {% if request.user == post.user %}
            <div class="post-comment-edit-link">
                <a href="{% url 'edit_post' post.id %}"
                    ><i class="fa-solid fa-file-pen"></i
                ></a>
            </div>
            <div class="post-comment-delete-link">
                <a href="{% url 'delete_post' post.id %}"
                    ><i class="fa-solid fa-trash"></i
                ></a>
            </div>
            {% endif %}
        </div>
        <div class="post-comment-description-container">
            <p>{{ post.description }}</p>
        </div>

        <div class="comeents-list">
                <div class="comment-container">
                    <div class="comment-image">
                        {% if comment.user.userprofile.profile_picture %}
                        <img
                            src="{{ comment.user.userprofile.profile_picture.url }}"
                            alt=""
                        />
                        {% else %}
                        <img
                            src="{% static 'accounts/images/empty_profile_img.jpg' %}"
                            alt=""
                        />
                        {% endif %}
                    </div>
                    <div class="comment-owner">{{ comment.user }}</div>
                    
                    {% if comment.user == request.user %}
                        <div class="comment-edit">
                            <a href="{% url 'edit_comment' comment.id %}"
                                ><i class="fa-solid fa-file-pen"></i
                            ></a>
                        </div>
                        <div class="comment-delete">
                            <a href="{% url 'delete_comment' comment.id %}"
                                ><i class="fa-solid fa-trash"></i
                            ></a>
                        </div>
                    
                    {% endif %}
                </div>
                <div class="comment-tetx">
                    <p>{{ comment.text }}</p>
                </div>
                <form method="POST" action="{% url 'edit_comment' comment.id %}">
            {% csrf_token %} 
            {{ form.text }}
            <!-- single-line input -->
            <button class="comment-button" type="submit">Submit</button>
        </form>
        </div>

        
    </div>
</section>
{% endblock %}
